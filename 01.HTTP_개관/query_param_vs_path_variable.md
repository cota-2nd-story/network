## URL BEST PRACTICE

*URL을 효과적으로 사용하기 위한 전략*

URL의 구성 요소 중 질의라는 요소가 있다.

질의는 서버에게 http 요청객체 표함된 경로 path, 헤더들외에 추가로 전달해야할 것이 있다면 파라미터로 URL에 정보를 담는 것을 말한다.

그 질의는 크게 두 가지로 나눌 수 있다.

## Query Parameter vs Path Variable

### Query Parameter (Query String)

```
GET /articles?id=123
```

위 URL은 게시글 번호 123을 달라는 요청 URL이다. 이렇게 쿼리 파라미터 혹은 질의 문자열은 URL 경로 맨 뒤에 '?' 문자와 함께 시작되어 키(id) - 값(123) 형태로 정보를 구성한다.

쿼리 파라미터를 무조건 사용하면 좋다라는 것은 없다. 충분히 URL의 path 정보와 헤더 정보만으로 서버에 원하는 처리를 요청할 수 있다면 질의 요소는 전혀 필요없다. 즉, 그 외 추가적으로 정보를 전달해야하는 상황이라면 질의 요소를 넣어 서버에 요청하여 명확한 처리를 기대할 수 있게된다.

### Path Variable

```
GET /articles/123
```

위 URL도 번호 123의 게시글을 달라는 요청이다. 사실 기능적으로 쿼리 파라미터와 다를게 없다.

다른점은 질의 문자열의 유무다. 이게 무슨 소리인가하면 위 path variable은 말 그대로 path다. 즉 /articles/123까지 온전히 path에 해당한다. 쿼리 파라미터의 예에서 보면 path는 /articles 까지가 path고 '?' 부터 질의가 시작된다.

이게 극적인 차이를 불러오는 것은 아니라고 생각한다. 하지만 개인적으로 path variable이 훨씬 깔끔하다고 생각한다. `/articles/{articleId}`로  충분히 몇번째 게시글을 요청하는지 알 수 있다. 쿼리 파라미터를 주지 않아도 충분한 정보를 전달할 수 있다면 쿼리 파라미터는 필요가 없다.

하지만 그렇다고 해서 쿼리 파라미터가 무조건 안좋다는 것은 절대 아니다. 위 예에서는 단순히 특정 게시글의 정보를 가져오는 요청을 했기 때문에 URL이 전혀 복잡하지 않았다. 반대로 서버에게 정말 세밀한 요청을 위해 전달해야할 정보가 많은 경우에는 path variable보다 쿼리 파리미터가 훨씬 명확하다.

```
GET /articles?page=0&size=2&sort=id,DESC
```

위 예는 spring에서 pageable을 파라미터로 받는 api에 요청을 보내는 URL이다. 의미를 해석해보자면 0번째 페이지에서 2개의 게시글을 id 기준으로 내림차순으로 정보를 달라는 요청이다. 이렇게 서버에 전달해야하는 정보가 많은 경우에는 key - value 형태의 쿼리 파라미터로 전달하는 것이 클라이언트나 서버입장에서 모두 명확하게 의미를 파악할 수 있다.

만약 위 상황을 path variable로 나타낸다면 URL에 path 에 불필요한 정보들이 많이 들어가게 될 것이다.

```
GET /articles/pages/0/sizes/2/sorts/id/DESC
```

한번 위 쿼리 파라미터를 path variable로만 나타내보려한 것이다. 사실 URL path에 이런 부가 정보를 모두 갖게 하는 것 자체가 비효율적이며 명확하지도 않다.

정리하자면 상황에 맞게 path variable과 query parameter를 적절하게 사용해야한다. 둘이 반드시 독립적으로 구분지어 하나만 사용해야하는 것도 절대 아니다. 서버에게 명확한 요청을 전달하기 위함이라는 목적 아래 이 둘은 같이 사용될 수 있고 우리는 상황에 맞게 더 유용한 방식이라 판단하여 URL을 구성하면 된다.
