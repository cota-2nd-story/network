# Proxy

Proxy?

### Proxy는 무엇인가?

- '대리' 라는 뜻
- 프록시는 클라이언트와 서버 사이에 위치하여 그들 사이를 중계한다.

### 왜 사용하는가?

- 실용적이고 유용한 것이라면 무슨 일이든 한다.
  ** 보안 (익명으로 변환. ip주소, from 헤더 등을 삭제)
  ** 캐시 사용
  ** 컨텐츠 차단
  ** 인터넷 사용률 측정
  ** 데이터 유출 보호
  ** 지역 제한 우회
  \*\* 트랜스코더 (데이터 압축)

## 위치에 따른 프록시 서버의

### Forward 프록시

클라이언트와 인터넷 사이에 위치한다.
backend server에게 클라이언트가 누구인지 감춘다.

- 프록시 서버를 클라이언트 호스트들과 접근하고자 하는 원격 리소스 사이에 위치 시킨다.
- 원격 서버로부터 요청된 리소스를 가져와서 요청한 사용자에게 돌려주는 역할을 수행한다.
- 만약 캐시가 남아있다면 캐시된 데이터를 제공한다.
- 클라이언트 호스트들은 웹 브라우저를 이용하여 프록시 서버 사용 설정을 해야하므로 프록시 서버를 사용하고 있따는 것을 인식할 수 있다.
- 대역폭 사용 감소 및 다루기 쉽고 비용이 저렴하다는 장점이 있다.
- 혹은 사용자의 정해진 사이트만 연결할 수 있는 등 환경을 제한할 수 있으므로 기업에서도 사용된다.

### Reverse 프록시

인터넷과 서버 사이에 위치한다.
클라이언트에게 backend server를 감춘다.

- 클라이언트를 대신해서 한 대 이상의 서버로부터 자원을 추출한다.
- 추출한 자원을 마치 웹 서버 자체에서 기원한 것처럼 바환된다.
- 외부 사용자에게 내부 서버의 정보를 숨길 수 있다.
- proxy 서버가 내부 서버의 정보를 알고 있으므로 로드밸런싱을 할 수 있다.
- 널리 보급된 웹 서버들은 리버스 프록시 기능을 사용하는 일이 잦다.

```
// nginx
server {
  listen 80;

  location / {
  proxy_pass http://127.0.0.1:3000/proxy_1;
  }
  location /test {
  proxy_pass http://127.0.0.1:3000/proxy_2;
  }
  error_page 404 /404.html;
  location = /40x.html {
  }
  error_page 500 502 503 504 /50x.html;
  location = /50x.html {
  }
}
```

> .location은 proxy 서버로 들어오는 요청 URL에 따라 맵핑된다. proxy_pass는 들오은 요청을 어디로 포워딩 해주는 지정한다.

```
// node.js

app.use('/proxy_1', (req, res) => {
  res.send('proxy 1 test success')
});

app.use('/proxy_2', (req, res) => {

    res.send('proxy 2 test success')
});

app.listen(3000, () => {
  console.log('open 3000 port')
})
```

> node express 서버는 3000번 포트를 open 하며 proxy_1, proxy_2 요청이 들어오면 응답한다.

### LAN

- Local area network (근거리 통신망)
- 집, 사무실, 학교 등의 건물과 같은 가까운 지역을 한데 묶는 컴퓨터 네트워크
- 이더넷, 와이파이는 이를 위해 흔히 쓰이는 기술이다.
- 1964년 핵무기 연구를 지원하기 위해 처음 시작되었다.
- 공유기등을 이용하여 연결한다.
- 구성할 때 드는 비용과 전기세를 빼고 유지보수비가 들지 않는다.
  \*\* 즉, 내부 통신 요금이 필요 없다.

### 이더넷

- 컴퓨터 네트워크 기술
- LAN, WAN 에서 많이 활용되는 기술 규격
- 빛의 매질로 여겨졌던 에테르(ether) 에서 유래
- 네트워크에 연결된 각 기기들의 48비트 길이의 고유의 MAC 주소를 가지고 이 주소를 이용해 상호간에 데이터를 주고 받을 수 있도록 만들어졌다.

### WAN

- Wide area network (광역 통신망)
- 드넓은 거리를 넘나드는 통신 네트워크이다.
- WAN은 LAN과 LAN 사이를 이어준다.
- 우리는 ISP(Internet Service Provider => SK, KT, LG) 네트워크망을 이용한다.
- 인터넷은 WAN으로 간주될 수 있다.
- 인터넷은 전 세계 ISP들이 서로 연결된 네트워크라 할 수 있다.
- 최상위에 위치한 ISP를 티어1 이라고 부른다.
  ** 이는 전 세계에 10곳 정도 밖에 존재하지 않는다.
  ** Tier1 끼리 초고속 통신 회선으로 연결이 되어 있다.
  \*\* 인터넷상의 모든 ISP는 tier1을 경유해서 연결이 된다.
-

### 공개 프록시

- 누구나 자유롭게 접속하여 사용할 수 있는 프록시 서버이다.
- IP주소를 남기지 않고 익명으로 활동 가능하다.
- 악성 코드, 바이러스 유포등에 악용될 수 있다.
- 따라서 많은 프로그램은 공개 프록시를 검출하여 사용을 금지한다.
- 중국에서는 모든 지역에서 위키백과에 접속 차단이 되어있다. 이때 공개 프록시를 사용하여 위키 백과에 참여하고 있다.
- 브라우저에서 [설정 -> 고급 설정 -> 네트워크 -> 프록시 설정 변경... -> 프록스 서버 -> 공개 프록시 ip 등록] 을 설정하면 공개 프록시를 이용할 수 있다.
